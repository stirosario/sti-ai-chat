<!-- 
  INSTRUCCIONES: Agregar estos tags en el <head> del index.php
  Ubicaci贸n: Despu茅s de los meta tags existentes y antes de los preloads
-->

<!-- ============================================ -->
<!-- PWA: MANIFEST Y APPLE TOUCH ICONS -->
<!-- ============================================ -->
<link rel="manifest" href="/manifest.json">

<!-- Apple Touch Icons -->
<link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png">

<!-- iOS Meta Tags -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ChatSTI">

<!-- Android/Chrome -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="ChatSTI">

<!-- Windows Tiles -->
<meta name="msapplication-TileColor" content="#0a1f44">
<meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
<meta name="msapplication-config" content="/browserconfig.xml">

<!-- ============================================ -->
<!-- PWA: SCRIPTS (agregar antes del cierre de </body>) -->
<!-- ============================================ -->
<script src="/pwa-install.js" defer></script>

<!-- Opcional: Bot贸n de instalaci贸n personalizado -->
<style>
  #pwa-install-btn {
    display: none; /* Se muestra autom谩ticamente cuando est谩 disponible */
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #0a1f44;
    color: white;
    padding: 12px 24px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    border: none;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    z-index: 9998;
    transition: all 0.3s ease;
  }
  
  #pwa-install-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.4);
  }
  
  #pwa-install-btn:active {
    transform: translateY(0);
  }
  
  @media (max-width: 640px) {
    #pwa-install-btn {
      bottom: 80px; /* Evitar overlap con bot贸n de chat */
      right: 16px;
      left: 16px;
      width: calc(100% - 32px);
    }
  }
</style>

<button id="pwa-install-btn">
   Instalar App
</button>

<!-- ============================================ -->
<!-- OPCIONAL: Analytics de PWA -->
<!-- ============================================ -->
<script>
  // Detectar si est谩 instalado
  if (window.matchMedia('(display-mode: standalone)').matches) {
    console.log('[PWA] Running as installed app');
    
    // Google Analytics (si est谩 configurado)
    if (typeof gtag !== 'undefined') {
      gtag('event', 'pwa_standalone', {
        event_category: 'PWA',
        event_label: 'Running standalone'
      });
    }
  }
  
  // Detectar modo offline/online
  window.addEventListener('offline', () => {
    console.log('[PWA] App went offline');
    // Opcional: Mostrar banner de "Sin conexi贸n"
  });
  
  window.addEventListener('online', () => {
    console.log('[PWA] App is back online');
    // Opcional: Ocultar banner y refrescar datos
  });
</script>
