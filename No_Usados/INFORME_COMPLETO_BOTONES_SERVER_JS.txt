================================================================================
INFORME COMPLETO DE BOTONES - server.js
Proyecto: STI / Tecnos
Fecha: 2025-01-XX
================================================================================

RESUMEN EJECUTIVO
================================================================================

Total de botones definidos: 50+
Ubicaci√≥n principal: server.js l√≠nea ~2977-3056 (EMBEDDED_CHAT.ui.buttons)
Funci√≥n de obtenci√≥n: getButtonDefinition(token) - l√≠nea ~3080
Funci√≥n de construcci√≥n: buildUiButtonsFromTokens(tokens, locale) - l√≠nea ~3107

Categor√≠as:
- Idioma: 2 botones
- Problemas frecuentes: 6 botones
- Dispositivos: 6 botones
- Sistema operativo: 3 botones
- Nivel de usuario: 3 botones
- Navegaci√≥n: 4 botones
- Estado/Resultado: 5 botones
- Ayuda por paso: 4 botones (m√°s din√°micos BTN_HELP_STEP_X)
- Acciones: 7 botones
- Feedback: 2 botones
- B√°sicos/Gen√©ricos: 8 botones

================================================================================
BOTONES POR CATEGOR√çA
================================================================================

CATEGOR√çA 1: IDIOMA
-------------------------------------------------------------------------------

BTN_LANG_ES_AR
- Token: 'BTN_LANG_ES_AR'
- Label: 'üá¶üá∑ Espa√±ol (Argentina)'
- Text: 'Espa√±ol (Argentina)'
- Ubicaci√≥n definici√≥n: l√≠nea ~2989
- Handler: handleAskLanguageStage() - l√≠nea ~2623+
- Uso: Selecci√≥n de idioma espa√±ol en etapa ASK_LANGUAGE
- Mapeo texto libre: "espa√±ol", "spanish", "es"
- Transici√≥n: ASK_LANGUAGE ‚Üí ASK_NAME
- Estado: ‚úÖ ACTIVO

BTN_LANG_EN
- Token: 'BTN_LANG_EN'
- Label: 'üá¨üáß English'
- Text: 'English'
- Ubicaci√≥n definici√≥n: l√≠nea ~2990
- Handler: handleAskLanguageStage() - l√≠nea ~2623+
- Uso: Selecci√≥n de idioma ingl√©s en etapa ASK_LANGUAGE
- Mapeo texto libre: "english", "ingl√©s", "en"
- Transici√≥n: ASK_LANGUAGE ‚Üí ASK_NAME
- Estado: ‚úÖ ACTIVO

CATEGOR√çA 2: PROBLEMAS FRECUENTES
-------------------------------------------------------------------------------

BTN_NO_ENCIENDE
- Token: 'BTN_NO_ENCIENDE'
- Label: 'üîå El equipo no enciende'
- Text: 'el equipo no enciende'
- Ubicaci√≥n definici√≥n: l√≠nea ~2995
- Handler: handleAskNeedStage() - l√≠nea ~4414+
- Funci√≥n mapeo: getProblemFromButton() - l√≠nea ~4232+
- Problema mapeado: 'el equipo no enciende' (ES) / 'the device does not turn on' (EN)
- Mapeo texto libre: "no enciende", "no prende", "no arranca", "no inicia", "does not turn on", "wont start"
- Ubicaci√≥n mapeo texto: l√≠nea ~4586-4592
- Transici√≥n: ASK_NEED ‚Üí ASK_DEVICE
- Estado: ‚úÖ ACTIVO

BTN_NO_INTERNET
- Token: 'BTN_NO_INTERNET'
- Label: 'üì° Problemas de conexi√≥n a Internet'
- Text: 'problemas de conexi√≥n a internet'
- Ubicaci√≥n definici√≥n: l√≠nea ~2996
- Handler: handleAskNeedStage() - l√≠nea ~4414+
- Funci√≥n mapeo: getProblemFromButton() - l√≠nea ~4232+
- Problema mapeado: 'problemas de conexi√≥n a internet' (ES) / 'internet connection problems' (EN)
- Mapeo texto libre: "problemas de conexi√≥n", "no hay internet", "sin internet", "no conecta", "internet connection", "wifi"
- Ubicaci√≥n mapeo texto: l√≠nea ~4594-4599
- Transici√≥n: ASK_NEED ‚Üí ASK_DEVICE
- Estado: ‚úÖ ACTIVO

BTN_LENTITUD
- Token: 'BTN_LENTITUD'
- Label: 'üê¢ Lentitud del sistema operativo o del equipo'
- Text: 'lentitud del sistema'
- Ubicaci√≥n definici√≥n: l√≠nea ~2997
- Handler: handleAskNeedStage() - l√≠nea ~4414+
- Funci√≥n mapeo: getProblemFromButton() - l√≠nea ~4232+
- Problema mapeado: 'lentitud del sistema' (ES) / 'system slowness' (EN)
- Mapeo texto libre: "lentitud", "lento", "muy lento", "muy lenta", "va lento", "slow", "slowness"
- Ubicaci√≥n mapeo texto: l√≠nea ~4601-4607
- Transici√≥n: ASK_NEED ‚Üí ASK_DEVICE
- Estado: ‚úÖ ACTIVO

BTN_BLOQUEO
- Token: 'BTN_BLOQUEO'
- Label: '‚ùÑÔ∏è Bloqueo o cuelgue de programas'
- Text: 'bloqueo de programas'
- Ubicaci√≥n definici√≥n: l√≠nea ~2998
- Handler: handleAskNeedStage() - l√≠nea ~4414+
- Funci√≥n mapeo: getProblemFromButton() - l√≠nea ~4232+
- Problema mapeado: 'bloqueo o cuelgue de programas' (ES) / 'program freezing or crashing' (EN)
- Mapeo texto libre: "bloqueo", "se cuelga", "se congela", "freezing", "crashing"
- Ubicaci√≥n mapeo texto: l√≠nea ~4609-4613
- Transici√≥n: ASK_NEED ‚Üí ASK_DEVICE
- Estado: ‚úÖ ACTIVO

BTN_PERIFERICOS
- Token: 'BTN_PERIFERICOS'
- Label: 'üñ®Ô∏è Problemas con perif√©ricos externos'
- Text: 'problemas con perif√©ricos'
- Ubicaci√≥n definici√≥n: l√≠nea ~2999
- Handler: handleAskNeedStage() - l√≠nea ~4414+
- Funci√≥n mapeo: getProblemFromButton() - l√≠nea ~4232+
- Problema mapeado: 'problemas con perif√©ricos externos' (ES) / 'external peripheral problems' (EN)
- Mapeo texto libre: "perif√©ricos", "periferico", "impresora", "printer", "teclado", "keyboard", "mouse"
- Ubicaci√≥n mapeo texto: l√≠nea ~4615-4620
- Transici√≥n: ASK_NEED ‚Üí ASK_DEVICE
- Estado: ‚úÖ ACTIVO

BTN_VIRUS
- Token: 'BTN_VIRUS'
- Label: 'üõ°Ô∏è Infecciones de malware o virus'
- Text: 'infecciones de virus'
- Ubicaci√≥n definici√≥n: l√≠nea ~3000
- Handler: handleAskNeedStage() - l√≠nea ~4414+
- Funci√≥n mapeo: getProblemFromButton() - l√≠nea ~4232+
- Problema mapeado: 'infecciones de malware o virus' (ES) / 'malware or virus infections' (EN)
- Mapeo texto libre: "virus", "malware", "infecci√≥n", "infection"
- Ubicaci√≥n mapeo texto: l√≠nea ~4622-4625
- Transici√≥n: ASK_NEED ‚Üí ASK_DEVICE
- Estado: ‚úÖ ACTIVO

CATEGOR√çA 3: DISPOSITIVOS
-------------------------------------------------------------------------------

BTN_DEV_PC_DESKTOP
- Token: 'BTN_DEV_PC_DESKTOP'
- Label: 'PC de escritorio'
- Text: 'pc de escritorio'
- Ubicaci√≥n definici√≥n: l√≠nea ~3006
- Handler: handleAskDeviceStage() - l√≠nea ~6038+
- Funci√≥n mapeo: getDeviceFromButton() - l√≠nea ~5645+
- Device mapeado: { device: 'pc', pcType: 'desktop', label: 'PC de escritorio' }
- Ubicaci√≥n mapeo: l√≠nea ~5645-5680
- Transici√≥n: ASK_DEVICE ‚Üí BASIC_TESTS
- Estado: ‚úÖ ACTIVO

BTN_DEV_PC_ALLINONE
- Token: 'BTN_DEV_PC_ALLINONE'
- Label: 'PC All in One'
- Text: 'pc all in one'
- Ubicaci√≥n definici√≥n: l√≠nea ~3007
- Handler: handleAskDeviceStage() - l√≠nea ~6038+
- Funci√≥n mapeo: getDeviceFromButton() - l√≠nea ~5645+
- Device mapeado: { device: 'pc', pcType: 'all_in_one', label: 'PC All in One' }
- Ubicaci√≥n mapeo: l√≠nea ~5645-5680
- Transici√≥n: ASK_DEVICE ‚Üí BASIC_TESTS
- Estado: ‚úÖ ACTIVO

BTN_DEV_NOTEBOOK
- Token: 'BTN_DEV_NOTEBOOK'
- Label: 'Notebook'
- Text: 'notebook'
- Ubicaci√≥n definici√≥n: l√≠nea ~3008
- Handler: handleAskDeviceStage() - l√≠nea ~6038+
- Funci√≥n mapeo: getDeviceFromButton() - l√≠nea ~5645+
- Device mapeado: { device: 'notebook', pcType: null, label: 'Notebook' }
- Ubicaci√≥n mapeo: l√≠nea ~5645-5680
- Transici√≥n: ASK_DEVICE ‚Üí BASIC_TESTS
- Estado: ‚úÖ ACTIVO

BTN_DESKTOP (Legacy)
- Token: 'BTN_DESKTOP'
- Label: 'Desktop üíª'
- Text: 'desktop'
- Ubicaci√≥n definici√≥n: l√≠nea ~3003
- Estado: ‚ö†Ô∏è LEGACY (usar BTN_DEV_PC_DESKTOP)

BTN_ALLINONE (Legacy)
- Token: 'BTN_ALLINONE'
- Label: 'All-in-One üñ•Ô∏è'
- Text: 'all in one'
- Ubicaci√≥n definici√≥n: l√≠nea ~3004
- Estado: ‚ö†Ô∏è LEGACY (usar BTN_DEV_PC_ALLINONE)

BTN_NOTEBOOK (Legacy)
- Token: 'BTN_NOTEBOOK'
- Label: 'Notebook üíº'
- Text: 'notebook'
- Ubicaci√≥n definici√≥n: l√≠nea ~3005
- Estado: ‚ö†Ô∏è LEGACY (usar BTN_DEV_NOTEBOOK)

CATEGOR√çA 4: SISTEMA OPERATIVO
-------------------------------------------------------------------------------

BTN_OS_WINDOWS
- Token: 'BTN_OS_WINDOWS'
- Label: 'ü™ü Windows'
- Text: 'Windows'
- Ubicaci√≥n definici√≥n: l√≠nea ~3011
- Handler: No handler espec√≠fico (se procesa en contexto de faltanDatosMinimos)
- Uso: Selecci√≥n de sistema operativo cuando se requiere (caseType: 'system')
- Transici√≥n: ASK_OS ‚Üí BASIC_TESTS o ADVANCED_TESTS
- Estado: ‚úÖ ACTIVO

BTN_OS_MACOS
- Token: 'BTN_OS_MACOS'
- Label: 'üçè macOS'
- Text: 'macOS'
- Ubicaci√≥n definici√≥n: l√≠nea ~3012
- Handler: No handler espec√≠fico (se procesa en contexto de faltanDatosMinimos)
- Uso: Selecci√≥n de sistema operativo cuando se requiere (caseType: 'system')
- Transici√≥n: ASK_OS ‚Üí BASIC_TESTS o ADVANCED_TESTS
- Estado: ‚úÖ ACTIVO

BTN_OS_LINUX
- Token: 'BTN_OS_LINUX'
- Label: 'üêß Linux'
- Text: 'Linux'
- Ubicaci√≥n definici√≥n: l√≠nea ~3013
- Handler: No handler espec√≠fico (se procesa en contexto de faltanDatosMinimos)
- Uso: Selecci√≥n de sistema operativo cuando se requiere (caseType: 'system')
- Transici√≥n: ASK_OS ‚Üí BASIC_TESTS o ADVANCED_TESTS
- Estado: ‚úÖ ACTIVO

CATEGOR√çA 5: NIVEL DE USUARIO
-------------------------------------------------------------------------------

BTN_USER_LEVEL_BASIC
- Token: 'BTN_USER_LEVEL_BASIC'
- Label: 'üü¢ B√°sico ‚Äî uso lo esencial, prefiero pasos simples' (ES)
- Label EN: 'üü¢ Basic ‚Äî I prefer simple steps'
- Text: 'b√°sico' (ES) / 'basic' (EN)
- Ubicaci√≥n definici√≥n: No est√° en EMBEDDED_CHAT (se genera din√°micamente)
- Handler: handleAskUserLevelStage() - l√≠nea ~3935+
- Ubicaci√≥n generaci√≥n: l√≠nea ~4015-4025 (ES), 4134-4136 (EN)
- Mapeo texto libre: "b√°sico", "basic" (case-insensitive)
- Ubicaci√≥n mapeo: l√≠nea ~4068
- Transici√≥n: ASK_USER_LEVEL ‚Üí ASK_NEED
- Guarda en sesi√≥n: session.userLevel = 'basic'
- Estado: ‚úÖ ACTIVO

BTN_USER_LEVEL_INTERMEDIATE
- Token: 'BTN_USER_LEVEL_INTERMEDIATE'
- Label: 'üü° Intermedio ‚Äî entiendo configuraciones y pruebas comunes' (ES)
- Label EN: 'üü° Intermediate ‚Äî I can do common checks'
- Text: 'intermedio' (ES) / 'intermediate' (EN)
- Ubicaci√≥n definici√≥n: No est√° en EMBEDDED_CHAT (se genera din√°micamente)
- Handler: handleAskUserLevelStage() - l√≠nea ~3935+
- Ubicaci√≥n generaci√≥n: l√≠nea ~4015-4025 (ES), 4134-4136 (EN)
- Mapeo texto libre: "intermedio", "intermediate" (case-insensitive)
- Ubicaci√≥n mapeo: l√≠nea ~4070
- Transici√≥n: ASK_USER_LEVEL ‚Üí ASK_NEED
- Guarda en sesi√≥n: session.userLevel = 'intermediate'
- Estado: ‚úÖ ACTIVO

BTN_USER_LEVEL_ADVANCED
- Token: 'BTN_USER_LEVEL_ADVANCED'
- Label: 'üîµ Avanzado ‚Äî ya hice pruebas t√©cnicas y ajustes' (ES)
- Label EN: 'üîµ Advanced ‚Äî I already tried technical checks'
- Text: 'avanzado' (ES) / 'advanced' (EN)
- Ubicaci√≥n definici√≥n: No est√° en EMBEDDED_CHAT (se genera din√°micamente)
- Handler: handleAskUserLevelStage() - l√≠nea ~3935+
- Ubicaci√≥n generaci√≥n: l√≠nea ~4015-4025 (ES), 4134-4136 (EN)
- Mapeo texto libre: "avanzado", "advanced" (case-insensitive)
- Ubicaci√≥n mapeo: l√≠nea ~4072
- Transici√≥n: ASK_USER_LEVEL ‚Üí ASK_NEED
- Guarda en sesi√≥n: session.userLevel = 'advanced'
- Estado: ‚úÖ ACTIVO

CATEGOR√çA 6: NAVEGACI√ìN
-------------------------------------------------------------------------------

BTN_BACK_TO_STEPS
- Token: 'BTN_BACK_TO_STEPS'
- Label: '‚è™ Volver a los pasos'
- Text: 'volver a los pasos'
- Ubicaci√≥n definici√≥n: l√≠nea ~3016
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7185+
- Comportamiento:
  * Si hay pasos confirmados: NO regenera, muestra solo pendientes
  * Si NO hay pasos confirmados: Regenera pasos normalmente
  * Verifica faltanDatosMinimos() antes de regenerar (FASE 1.1)
- Transici√≥n: Mantiene BASIC_TESTS
- Estado: ‚úÖ ACTIVO

BTN_BACK
- Token: 'BTN_BACK'
- Label: '‚è™ Volver atr√°s'
- Text: 'volver atr√°s'
- Ubicaci√≥n definici√≥n: l√≠nea ~3017
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7185+ (mismo que BTN_BACK_TO_STEPS)
- Comportamiento: Similar a BTN_BACK_TO_STEPS
- Estado: ‚úÖ ACTIVO

BTN_CHANGE_TOPIC
- Token: 'BTN_CHANGE_TOPIC'
- Label: 'üîÑ Cambiar de tema'
- Text: 'cambiar de tema'
- Ubicaci√≥n definici√≥n: l√≠nea ~3018
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

BTN_MORE_INFO
- Token: 'BTN_MORE_INFO'
- Label: '‚ÑπÔ∏è M√°s informaci√≥n'
- Text: 'm√°s informaci√≥n'
- Ubicaci√≥n definici√≥n: l√≠nea ~3019
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

CATEGOR√çA 7: ESTADO/RESULTADO
-------------------------------------------------------------------------------

BTN_SOLVED
- Token: 'BTN_SOLVED'
- Label: 'üëç Ya lo solucion√©'
- Text: 'lo pude solucionar'
- Ubicaci√≥n definici√≥n: l√≠nea ~3022
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7605+
- Comportamiento:
  * Muestra mensaje de celebraci√≥n
  * Muestra botones de feedback (üëç/üëé)
  * NO cambia a ENDED todav√≠a (espera feedback)
  * Marca session.feedbackButtonsShown = true
- Mapeo texto libre: "s√≠", "si", "lo pude", "lo pude solucionar", "resuelto", "solucionado"
- Ubicaci√≥n mapeo: l√≠nea ~7605
- Prevenci√≥n repetici√≥n: Aplicada (FASE 2.3)
- Estado: ‚úÖ ACTIVO

BTN_PERSIST
- Token: 'BTN_PERSIST'
- Label: '‚ùå Todav√≠a no funciona'
- Text: 'el problema persiste'
- Ubicaci√≥n definici√≥n: l√≠nea ~3023
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7796+
- Comportamiento:
  * Verifica frustraci√≥n real (hasRealFrustration)
  * Si hay frustraci√≥n v√°lida: Escala a t√©cnico (ESCALATE)
  * Si NO hay frustraci√≥n: Pide m√°s informaci√≥n
- Mapeo texto libre: "no", "n", "el problema persiste", "persiste", "todav√≠a no", "a√∫n no"
- Ubicaci√≥n mapeo: l√≠nea ~7796
- Transici√≥n: BASIC_TESTS ‚Üí ESCALATE (si frustraci√≥n v√°lida)
- Estado: ‚úÖ ACTIVO

BTN_ADVANCED_TESTS
- Token: 'BTN_ADVANCED_TESTS'
- Label: 'üî¨ Pruebas Avanzadas'
- Text: 'pruebas avanzadas'
- Ubicaci√≥n definici√≥n: l√≠nea ~3024
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: No handler espec√≠fico encontrado (probablemente cambia a ADVANCED_TESTS stage)
- Transici√≥n: BASIC_TESTS ‚Üí ADVANCED_TESTS
- Estado: ‚úÖ ACTIVO

BTN_MORE_TESTS
- Token: 'BTN_MORE_TESTS'
- Label: 'üîç M√°s pruebas'
- Text: 'm√°s pruebas'
- Ubicaci√≥n definici√≥n: l√≠nea ~3025
- Mapeo: TOKEN_MAP en index.php mapea a BTN_ADVANCED_TESTS
- Estado: ‚ö†Ô∏è ALIAS (mapea a BTN_ADVANCED_TESTS)

BTN_TECH
- Token: 'BTN_TECH'
- Label: 'üßë‚Äçüíª T√©cnico real'
- Text: 'hablar con t√©cnico'
- Ubicaci√≥n definici√≥n: l√≠nea ~3026
- Handler: Probablemente handleEscalateStage()
- Estado: ‚úÖ ACTIVO

CATEGOR√çA 8: AYUDA POR PASO
-------------------------------------------------------------------------------

BTN_HELP_STEP_X (Din√°mico)
- Token: 'BTN_HELP_STEP_0', 'BTN_HELP_STEP_1', ..., 'BTN_HELP_STEP_N'
- Label: Generado din√°micamente (ej: 'üÜò Ayuda Paso 1Ô∏è‚É£')
- Text: Generado din√°micamente
- Ubicaci√≥n definici√≥n: Generado din√°micamente en handleAskDeviceStage() y handleBasicTestsStage()
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7383+
- Comportamiento:
  * Extrae √≠ndice del paso del token (ej: "BTN_HELP_STEP_0" ‚Üí 0)
  * Genera explicaci√≥n detallada usando explainStepWithAI()
  * Muestra botones para continuar
  * Registra en session.progress.lastStepSelected
- Ubicaci√≥n generaci√≥n botones: l√≠nea ~7252-7262
- Estado: ‚úÖ ACTIVO

BTN_HELP_1, BTN_HELP_2, BTN_HELP_3, BTN_HELP_4 (Legacy)
- Tokens: 'BTN_HELP_1', 'BTN_HELP_2', 'BTN_HELP_3', 'BTN_HELP_4'
- Labels: 'Ayuda paso 1', 'Ayuda paso 2', etc.
- Ubicaci√≥n definici√≥n: l√≠nea ~3029-3032
- Estado: ‚ö†Ô∏è LEGACY (usar BTN_HELP_STEP_X din√°mico)

CATEGOR√çA 9: ACCIONES
-------------------------------------------------------------------------------

BTN_CLOSE
- Token: 'BTN_CLOSE'
- Label: 'üîö Cerrar Chat'
- Text: 'cerrar chat'
- Ubicaci√≥n definici√≥n: l√≠nea ~3036
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7066+
- Comportamiento:
  * Si feedbackRecorded === true: Cierra directamente
  * Si feedbackRecorded !== true: Muestra feedback antes de cerrar
  * Cambia a ENDED despu√©s de feedback
- Mapeo texto libre: "cerrar chat"
- Ubicaci√≥n mapeo: l√≠nea ~7066
- Prevenci√≥n repetici√≥n: Aplicada (FASE 2.3)
- Estado: ‚úÖ ACTIVO

BTN_WHATSAPP
- Token: 'BTN_WHATSAPP'
- Label: 'Enviar WhatsApp'
- Text: 'enviar por whatsapp'
- Ubicaci√≥n definici√≥n: l√≠nea ~3037
- Handler: Probablemente handleEscalateStage()
- Estado: ‚ö†Ô∏è DEFINIDO (verificar uso)

BTN_CONNECT_TECH
- Token: 'BTN_CONNECT_TECH'
- Label: 'üë®‚Äçüè≠ Conectar con T√©cnico'
- Text: 'conectar con t√©cnico'
- Ubicaci√≥n definici√≥n: l√≠nea ~3038
- Handler: handleEscalateStage() - l√≠nea ~9486+
- Comportamiento: Genera ticket y muestra bot√≥n de WhatsApp
- Estado: ‚úÖ ACTIVO

BTN_WHATSAPP_TECNICO
- Token: 'BTN_WHATSAPP_TECNICO'
- Label: 'üíö Hablar con un T√©cnico'
- Text: 'hablar con un t√©cnico'
- Ubicaci√≥n definici√≥n: l√≠nea ~3039
- Handler: Frontend (appendWAButton) + createTicketAndRespond()
- Comportamiento:
  * Se crea din√°micamente en frontend cuando allowWhatsapp: true
  * Abre WhatsApp con mensaje pre-llenado
  * NO se env√≠a como bot√≥n normal al backend
- Estado: ‚úÖ ACTIVO (generado en frontend)

BTN_CONFIRM_TICKET
- Token: 'BTN_CONFIRM_TICKET'
- Label: 'S√≠, generar ticket ‚úÖ'
- Text: 's√≠, generar ticket'
- Ubicaci√≥n definici√≥n: l√≠nea ~3040
- Handler: Probablemente handleEscalateStage()
- Estado: ‚ö†Ô∏è DEFINIDO (verificar uso)

BTN_CANCEL
- Token: 'BTN_CANCEL'
- Label: 'Cancelar ‚ùå'
- Text: 'cancelar'
- Ubicaci√≥n definici√≥n: l√≠nea ~3041
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

BTN_REPHRASE
- Token: 'BTN_REPHRASE'
- Label: 'Cambiar problema'
- Text: 'cambiar problema'
- Ubicaci√≥n definici√≥n: l√≠nea ~3035
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

CATEGOR√çA 10: FEEDBACK
-------------------------------------------------------------------------------

BTN_FEEDBACK_USEFUL
- Token: 'BTN_FEEDBACK_USEFUL'
- Label: 'üëç La ayuda de Tecnos me fue √∫til' (ES) / 'üëç Tecnos was helpful' (EN)
- Text: Generado din√°micamente
- Ubicaci√≥n definici√≥n: No est√° en EMBEDDED_CHAT (se genera din√°micamente)
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7713+
- Ubicaci√≥n generaci√≥n: l√≠nea ~7664-7675
- Comportamiento:
  * Guarda feedback con result: 'useful'
  * Marca session.feedbackRecorded = true
  * Cambia a ENDED
  * Muestra mensaje de agradecimiento
- Prevenci√≥n repetici√≥n: Aplicada (FASE 2.3)
- Guard rail: Bloquea si session.simulation === true
- Estado: ‚úÖ ACTIVO

BTN_FEEDBACK_NOT_USEFUL
- Token: 'BTN_FEEDBACK_NOT_USEFUL'
- Label: 'üëé La ayuda de Tecnos no me sirvi√≥' (ES) / 'üëé Tecnos was not helpful' (EN)
- Text: Generado din√°micamente
- Ubicaci√≥n definici√≥n: No est√° en EMBEDDED_CHAT (se genera din√°micamente)
- Handler: handleBasicTestsStage() - l√≠nea ~7161+
- Ubicaci√≥n procesamiento: l√≠nea ~7713+
- Ubicaci√≥n generaci√≥n: l√≠nea ~7664-7675
- Comportamiento:
  * Guarda feedback con result: 'not_useful'
  * Marca session.feedbackRecorded = true
  * Cambia a ENDED
  * Muestra mensaje de agradecimiento
- Prevenci√≥n repetici√≥n: Aplicada (FASE 2.3)
- Guard rail: Bloquea si session.simulation === true
- Estado: ‚úÖ ACTIVO

CATEGOR√çA 11: B√ÅSICOS/GEN√âRICOS
-------------------------------------------------------------------------------

BTN_SUCCESS
- Token: 'BTN_SUCCESS'
- Label: '‚úÖ Funcion√≥'
- Text: 'funcion√≥'
- Ubicaci√≥n definici√≥n: l√≠nea ~3044
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

BTN_NEED_HELP
- Token: 'BTN_NEED_HELP'
- Label: '‚ùì Necesito ayuda'
- Text: 'necesito ayuda'
- Ubicaci√≥n definici√≥n: l√≠nea ~3045
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

BTN_YES
- Token: 'BTN_YES'
- Label: '‚úÖ S√≠'
- Text: 's√≠'
- Ubicaci√≥n definici√≥n: l√≠nea ~3046
- Handler: M√∫ltiples handlers (depende del contexto)
- Estado: ‚úÖ ACTIVO

BTN_NO
- Token: 'BTN_NO'
- Label: '‚ùå No'
- Text: 'no'
- Ubicaci√≥n definici√≥n: l√≠nea ~3047
- Handler: M√∫ltiples handlers (depende del contexto)
- Estado: ‚úÖ ACTIVO

BTN_BASIC_YES
- Token: 'BTN_BASIC_YES'
- Label: 'S√≠'
- Text: 's√≠'
- Ubicaci√≥n definici√≥n: l√≠nea ~3050
- Estado: ‚ö†Ô∏è DEFINIDO (verificar uso vs BTN_YES)

BTN_BASIC_NO
- Token: 'BTN_BASIC_NO'
- Label: 'No'
- Text: 'no'
- Ubicaci√≥n definici√≥n: l√≠nea ~3051
- Estado: ‚ö†Ô∏è DEFINIDO (verificar uso vs BTN_NO)

BTN_ADVANCED
- Token: 'BTN_ADVANCED'
- Label: 'Avanzadas'
- Text: 'avanzadas'
- Ubicaci√≥n definici√≥n: l√≠nea ~3052
- Estado: ‚ö†Ô∏è DEFINIDO (verificar uso vs BTN_ADVANCED_TESTS)

BTN_DEVICE_PC
- Token: 'BTN_DEVICE_PC'
- Label: 'PC'
- Text: 'pc'
- Ubicaci√≥n definici√≥n: l√≠nea ~3053
- Estado: ‚ö†Ô∏è LEGACY (usar BTN_DEV_PC_DESKTOP)

BTN_DEVICE_NOTEBOOK
- Token: 'BTN_DEVICE_NOTEBOOK'
- Label: 'Notebook'
- Text: 'notebook'
- Ubicaci√≥n definici√≥n: l√≠nea ~3054
- Estado: ‚ö†Ô∏è LEGACY (usar BTN_DEV_NOTEBOOK)

BTN_DEVICE_MONITOR
- Token: 'BTN_DEVICE_MONITOR'
- Label: 'Monitor'
- Text: 'monitor'
- Ubicaci√≥n definici√≥n: l√≠nea ~3055
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

BTN_OTHER
- Token: 'BTN_OTHER'
- Label: 'Otro'
- Text: '' (vac√≠o)
- Ubicaci√≥n definici√≥n: l√≠nea ~3056
- Handler: No handler espec√≠fico encontrado
- Estado: ‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO

BOTONES ESPECIALES (No en EMBEDDED_CHAT)
-------------------------------------------------------------------------------

'si' / 'yes' (GDPR)
- Token: 'si' o 'yes'
- Label: 'S√≠ Acepto / Yes, I Accept ‚úîÔ∏è'
- Text: 's√≠'
- Handler: handleAskLanguageStage() - l√≠nea ~2623+
- Ubicaci√≥n: l√≠nea ~2583, 2907
- Comportamiento: Acepta GDPR y selecciona idioma
- Estado: ‚úÖ ACTIVO

'no' (GDPR)
- Token: 'no'
- Label: 'No Acepto / No, I Decline ‚ùå'
- Text: 'no'
- Handler: handleAskLanguageStage() - l√≠nea ~2623+
- Ubicaci√≥n: l√≠nea ~2584, 2908
- Comportamiento: Rechaza GDPR, cierra chat
- Estado: ‚úÖ ACTIVO

'espa√±ol' / 'english' (Idioma)
- Token: 'espa√±ol' o 'english'
- Label: '(üá¶üá∑) Espa√±ol üåé' o '(üá∫üá∏) English üåé'
- Text: 'espa√±ol' o 'english'
- Handler: handleAskLanguageStage() - l√≠nea ~2623+
- Ubicaci√≥n: l√≠nea ~2732-2733, 2902-2903
- Estado: ‚úÖ ACTIVO

================================================================================
FUNCIONES RELACIONADAS CON BOTONES
================================================================================

getButtonDefinition(token)
- Ubicaci√≥n: l√≠nea ~3080
- Funci√≥n: Busca definici√≥n de bot√≥n en EMBEDDED_CHAT.ui.buttons
- Retorna: { token, label, text } o null
- Uso: Obtener informaci√≥n completa de un bot√≥n por su token

buildUiButtonsFromTokens(tokens, locale)
- Ubicaci√≥n: l√≠nea ~3107
- Funci√≥n: Construye array de botones desde tokens
- Par√°metros: Array de tokens, locale
- Retorna: Array de { token, label, text }
- Uso: Generar botones para mostrar al usuario

getProblemFromButton(buttonToken)
- Ubicaci√≥n: l√≠nea ~4232
- Funci√≥n: Mapea token de problema a texto del problema
- Retorna: { problem, problemEn } o null
- Uso: Obtener texto del problema desde token de bot√≥n

getDeviceFromButton(buttonToken)
- Ubicaci√≥n: l√≠nea ~5645
- Funci√≥n: Mapea token de dispositivo a configuraci√≥n
- Retorna: { device, pcType, label } o null
- Uso: Obtener configuraci√≥n de dispositivo desde token

sortProblemButtons(buttons)
- Ubicaci√≥n: l√≠nea ~4269
- Funci√≥n: Ordena botones de problema por tasa de √©xito hist√≥rica
- Retorna: Array ordenado de botones
- Uso: Mostrar problemas m√°s exitosos primero

================================================================================
MAPEOS DE TEXTO LIBRE A BOTONES
================================================================================

Problemas (handleAskNeedStage - l√≠nea ~4550+):
- "no enciende", "no prende", "no arranca", "no inicia" ‚Üí BTN_NO_ENCIENDE
- "problemas de conexi√≥n", "no hay internet", "sin internet", "no conecta", "wifi" ‚Üí BTN_NO_INTERNET
- "lentitud", "lento", "muy lento", "va lento" ‚Üí BTN_LENTITUD
- "bloqueo", "se cuelga", "se congela" ‚Üí BTN_BLOQUEO
- "perif√©ricos", "impresora", "teclado", "mouse" ‚Üí BTN_PERIFERICOS
- "virus", "malware", "infecci√≥n" ‚Üí BTN_VIRUS

Nivel de usuario (handleAskUserLevelStage - l√≠nea ~4068+):
- "b√°sico", "basic" ‚Üí BTN_USER_LEVEL_BASIC
- "intermedio", "intermediate" ‚Üí BTN_USER_LEVEL_INTERMEDIATE
- "avanzado", "advanced" ‚Üí BTN_USER_LEVEL_ADVANCED

Estado (handleBasicTestsStage):
- "s√≠", "si", "lo pude solucionar", "resuelto", "solucionado" ‚Üí BTN_SOLVED (l√≠nea ~7605)
- "no", "el problema persiste", "persiste", "todav√≠a no" ‚Üí BTN_PERSIST (l√≠nea ~7796)
- "cerrar chat" ‚Üí BTN_CLOSE (l√≠nea ~7066)

================================================================================
UBICACIONES DE PROCESAMIENTO DE BOTONES
================================================================================

handleAskLanguageStage() - l√≠nea ~2623+
- Procesa: 'si', 'yes', 'no', 'espa√±ol', 'english'
- Botones mostrados: GDPR (si/no), Idioma (espa√±ol/english)

handleAskNameStage() - l√≠nea ~3575+
- No procesa botones espec√≠ficos (solo texto libre)

handleAskUserLevelStage() - l√≠nea ~3935+
- Procesa: BTN_USER_LEVEL_BASIC, BTN_USER_LEVEL_INTERMEDIATE, BTN_USER_LEVEL_ADVANCED
- Botones mostrados: Nivel de usuario (3 opciones)

handleAskNeedStage() - l√≠nea ~4414+
- Procesa: BTN_NO_ENCIENDE, BTN_NO_INTERNET, BTN_LENTITUD, BTN_BLOQUEO, BTN_PERIFERICOS, BTN_VIRUS
- Botones mostrados: Problemas frecuentes (6 opciones)
- Mapeo texto libre: M√∫ltiples variantes por problema

handleAskDeviceStage() - l√≠nea ~6038+
- Procesa: BTN_DEV_PC_DESKTOP, BTN_DEV_PC_ALLINONE, BTN_DEV_NOTEBOOK
- Botones mostrados: Dispositivos (3 opciones)
- Genera pasos despu√©s de seleccionar dispositivo

handleBasicTestsStage() - l√≠nea ~7161+
- Procesa m√∫ltiples botones:
  * BTN_CLOSE (l√≠nea ~7066)
  * BTN_BACK_TO_STEPS, BTN_BACK (l√≠nea ~7185)
  * BTN_HELP_STEP_X (l√≠nea ~7383)
  * BTN_SOLVED (l√≠nea ~7605)
  * BTN_FEEDBACK_USEFUL, BTN_FEEDBACK_NOT_USEFUL (l√≠nea ~7713)
  * BTN_PERSIST (l√≠nea ~7796)
  * BTN_ADVANCED_TESTS (probablemente)

handleEscalateStage() - l√≠nea ~9486+
- Procesa: BTN_CONNECT_TECH, BTN_WHATSAPP_TECNICO
- Genera ticket y muestra bot√≥n de WhatsApp

================================================================================
ESTADOS DE BOTONES
================================================================================

‚úÖ ACTIVO: Bot√≥n definido, handler implementado, en uso
‚ö†Ô∏è DEFINIDO PERO NO IMPLEMENTADO: Bot√≥n definido pero sin handler espec√≠fico
‚ö†Ô∏è LEGACY: Bot√≥n antiguo, usar versi√≥n nueva
‚ö†Ô∏è ALIAS: Bot√≥n que mapea a otro bot√≥n

================================================================================
ESTAD√çSTICAS
================================================================================

Total botones en EMBEDDED_CHAT: 50
Botones activos: ~35
Botones legacy/no implementados: ~15
Botones din√°micos: BTN_HELP_STEP_X (ilimitados)
Botones especiales (no en EMBEDDED_CHAT): 4 (si, no, espa√±ol, english)

Categor√≠as con m√°s botones:
1. B√°sicos/Gen√©ricos: 8
2. Acciones: 7
3. Problemas frecuentes: 6
4. Dispositivos: 6
5. Navegaci√≥n: 4
6. Ayuda por paso: 4 (m√°s din√°micos)

================================================================================
RECOMENDACIONES
================================================================================

1. Consolidar botones legacy:
   - BTN_DESKTOP ‚Üí BTN_DEV_PC_DESKTOP
   - BTN_NOTEBOOK ‚Üí BTN_DEV_NOTEBOOK
   - BTN_ALLINONE ‚Üí BTN_DEV_PC_ALLINONE
   - BTN_DEVICE_PC ‚Üí BTN_DEV_PC_DESKTOP
   - BTN_DEVICE_NOTEBOOK ‚Üí BTN_DEV_NOTEBOOK

2. Implementar handlers faltantes:
   - BTN_CHANGE_TOPIC
   - BTN_MORE_INFO
   - BTN_CANCEL
   - BTN_REPHRASE
   - BTN_SUCCESS
   - BTN_NEED_HELP
   - BTN_DEVICE_MONITOR
   - BTN_OTHER

3. Agregar a EMBEDDED_CHAT:
   - BTN_USER_LEVEL_BASIC, BTN_USER_LEVEL_INTERMEDIATE, BTN_USER_LEVEL_ADVANCED
   - BTN_FEEDBACK_USEFUL, BTN_FEEDBACK_NOT_USEFUL

4. Documentar botones din√°micos:
   - BTN_HELP_STEP_X (formato y rango)

================================================================================
DETALLES ADICIONALES DE HANDLERS
================================================================================

handleAskLanguageStage() - l√≠nea ~2623
-------------------------------------------------------------------------------
Botones procesados:
- 'si', 'yes', 's√≠' ‚Üí Acepta GDPR, muestra botones de idioma
- 'no' ‚Üí Rechaza GDPR, cierra chat
- 'espa√±ol', 'english' ‚Üí Selecciona idioma, avanza a ASK_NAME

Botones mostrados:
- GDPR: 'S√≠ Acepto / Yes, I Accept ‚úîÔ∏è' (value: 'si'), 'No Acepto / No, I Decline ‚ùå' (value: 'no')
- Idioma: '(üá¶üá∑) Espa√±ol üåé' (value: 'espa√±ol'), '(üá∫üá∏) English üåé' (value: 'english')

handleAskUserLevelStage() - l√≠nea ~3935
-------------------------------------------------------------------------------
Botones procesados:
- BTN_USER_LEVEL_BASIC ‚Üí session.userLevel = 'basic'
- BTN_USER_LEVEL_INTERMEDIATE ‚Üí session.userLevel = 'intermediate'
- BTN_USER_LEVEL_ADVANCED ‚Üí session.userLevel = 'advanced'

Botones mostrados (generados din√°micamente):
- ES: 'üü¢ B√°sico ‚Äî uso lo esencial, prefiero pasos simples'
- ES: 'üü° Intermedio ‚Äî entiendo configuraciones y pruebas comunes'
- ES: 'üîµ Avanzado ‚Äî ya hice pruebas t√©cnicas y ajustes'
- EN: 'üü¢ Basic ‚Äî I prefer simple steps'
- EN: 'üü° Intermediate ‚Äî I can do common checks'
- EN: 'üîµ Advanced ‚Äî I already tried technical checks'

Mapeo texto libre:
- "b√°sico", "basic" ‚Üí BTN_USER_LEVEL_BASIC
- "intermedio", "intermediate" ‚Üí BTN_USER_LEVEL_INTERMEDIATE
- "avanzado", "advanced" ‚Üí BTN_USER_LEVEL_ADVANCED

handleAskNeedStage() - l√≠nea ~4414
-------------------------------------------------------------------------------
Botones procesados:
- BTN_NO_ENCIENDE ‚Üí session.problem = 'el equipo no enciende'
- BTN_NO_INTERNET ‚Üí session.problem = 'problemas de conexi√≥n a internet'
- BTN_LENTITUD ‚Üí session.problem = 'lentitud del sistema'
- BTN_BLOQUEO ‚Üí session.problem = 'bloqueo o cuelgue de programas'
- BTN_PERIFERICOS ‚Üí session.problem = 'problemas con perif√©ricos externos'
- BTN_VIRUS ‚Üí session.problem = 'infecciones de malware o virus'

Botones mostrados:
- Ordenados por tasa de √©xito hist√≥rica (sortProblemButtons)
- 6 botones de problemas frecuentes

Mapeo texto libre:
- M√∫ltiples variantes por problema (l√≠nea ~4586-4625)
- Detecta sin√≥nimos y variantes en espa√±ol e ingl√©s

handleAskDeviceStage() - l√≠nea ~6038
-------------------------------------------------------------------------------
Botones procesados:
- BTN_DEV_PC_DESKTOP ‚Üí session.device = 'pc', session.pcType = 'desktop'
- BTN_DEV_PC_ALLINONE ‚Üí session.device = 'pc', session.pcType = 'all_in_one'
- BTN_DEV_NOTEBOOK ‚Üí session.device = 'notebook', session.pcType = null

Botones mostrados:
- 3 botones de dispositivos (PC escritorio, PC All-in-One, Notebook)
- Generados con buildUiButtonsFromTokens()

Mapeo texto libre:
- "pc", "desktop", "computadora de escritorio" ‚Üí BTN_DEV_PC_DESKTOP
- "all in one", "all-in-one", "todo en uno" ‚Üí BTN_DEV_PC_ALLINONE
- "notebook", "laptop", "port√°til" ‚Üí BTN_DEV_NOTEBOOK

Despu√©s de seleccionar dispositivo:
- Genera pasos de diagn√≥stico (generateDiagnosticSteps)
- Cambia a BASIC_TESTS

handleBasicTestsStage() - l√≠nea ~7161
-------------------------------------------------------------------------------
Botones procesados (en orden de aparici√≥n):

1. BTN_CLOSE (l√≠nea ~7201)
   - Si feedbackRecorded === true: Cierra directamente
   - Si feedbackRecorded !== true: Muestra feedback antes de cerrar
   - Mapeo texto: "cerrar chat"

2. BTN_BACK_TO_STEPS / BTN_BACK (l√≠nea ~7332)
   - Si hay pasos confirmados: NO regenera, muestra solo pendientes
   - Si NO hay pasos confirmados: Regenera pasos normalmente
   - Verifica faltanDatosMinimos() antes de regenerar

3. BTN_HELP_STEP_X (l√≠nea ~7584)
   - Extrae √≠ndice del paso del token (ej: "BTN_HELP_STEP_0" ‚Üí 0)
   - Genera explicaci√≥n detallada usando explainStepWithAI()
   - Muestra botones para continuar
   - Registra en session.progress.lastStepSelected

4. BTN_SOLVED (l√≠nea ~7806)
   - Muestra mensaje de celebraci√≥n
   - Muestra botones de feedback (üëç/üëé)
   - NO cambia a ENDED todav√≠a (espera feedback)
   - Marca session.feedbackButtonsShown = true
   - Mapeo texto: "s√≠", "si", "lo pude solucionar", "resuelto", "solucionado"

5. BTN_FEEDBACK_USEFUL / BTN_FEEDBACK_NOT_USEFUL (l√≠nea ~7939)
   - Guarda feedback con result: 'useful' o 'not_useful'
   - Marca session.feedbackRecorded = true
   - Cambia a ENDED
   - Muestra mensaje de agradecimiento
   - Guard rail: Bloquea si session.simulation === true

6. BTN_PERSIST (l√≠nea ~8038)
   - Verifica frustraci√≥n real (hasRealFrustration)
   - Si hay frustraci√≥n v√°lida: Escala a t√©cnico (ESCALATE)
   - Si NO hay frustraci√≥n: Pide m√°s informaci√≥n
   - Mapeo texto: "no", "el problema persiste", "persiste", "todav√≠a no"

7. BTN_WHATSAPP_TECNICO / BTN_CONNECT_TECH (l√≠nea ~8177)
   - Genera ticket
   - Muestra bot√≥n de WhatsApp en frontend

handleEscalateStage() - l√≠nea ~9486
-------------------------------------------------------------------------------
Botones procesados:
- BTN_WHATSAPP_TECNICO / BTN_CONNECT_TECH ‚Üí Genera ticket y muestra WhatsApp
- BTN_BACK / BTN_BACK_TO_STEPS ‚Üí Vuelve a pasos anteriores

Botones mostrados:
- Bot√≥n de WhatsApp (generado din√°micamente en frontend)
- Botones de navegaci√≥n (volver atr√°s)

================================================================================
BOTONES DIN√ÅMICOS
================================================================================

BTN_HELP_STEP_X
-------------------------------------------------------------------------------
Formato: BTN_HELP_STEP_{indice}
Ejemplos: BTN_HELP_STEP_0, BTN_HELP_STEP_1, BTN_HELP_STEP_2, ...

Generaci√≥n:
- Se generan din√°micamente en generateDiagnosticSteps() (l√≠nea ~6444)
- Se insertan como marcadores en el texto: [BTN_HELP_STEP_0]
- El frontend debe reemplazar los marcadores con botones reales

Procesamiento:
- Handler: handleBasicTestsStage() - l√≠nea ~7584
- Extrae √≠ndice: buttonToken.match(/BTN_HELP_STEP_(\d+)/)
- Genera explicaci√≥n: explainStepWithAI(stepIndex, session)
- Muestra botones para continuar

Ubicaci√≥n en c√≥digo:
- Generaci√≥n: l√≠nea ~6444, ~7252-7262, ~7385, ~7405
- Procesamiento: l√≠nea ~7584-7650

BTN_FEEDBACK_USEFUL / BTN_FEEDBACK_NOT_USEFUL
-------------------------------------------------------------------------------
Generaci√≥n:
- Se generan din√°micamente en handleBasicTestsStage() (l√≠nea ~7258-7263)
- Solo se muestran cuando session.feedbackButtonsShown === false
- Se ocultan despu√©s de hacer clic

Labels:
- ES: 'üëç La ayuda de Tecnos me fue √∫til' / 'üëé La ayuda de Tecnos no me sirvi√≥'
- EN: 'üëç Tecnos was helpful' / 'üëé Tecnos was not helpful'

Procesamiento:
- Handler: handleBasicTestsStage() - l√≠nea ~7939
- Guarda feedback en session.feedback
- Cambia a ENDED despu√©s de guardar

================================================================================
MAPEOS Y FUNCIONES DE CONVERSI√ìN
================================================================================

getProblemFromButton(buttonToken) - l√≠nea ~4232
-------------------------------------------------------------------------------
Mapea tokens de problemas a texto descriptivo:
- BTN_NO_ENCIENDE ‚Üí { problem: 'el equipo no enciende', problemEn: 'the device does not turn on' }
- BTN_NO_INTERNET ‚Üí { problem: 'problemas de conexi√≥n a internet', problemEn: 'internet connection problems' }
- BTN_LENTITUD ‚Üí { problem: 'lentitud del sistema', problemEn: 'system slowness' }
- BTN_BLOQUEO ‚Üí { problem: 'bloqueo o cuelgue de programas', problemEn: 'program freezing or crashing' }
- BTN_PERIFERICOS ‚Üí { problem: 'problemas con perif√©ricos externos', problemEn: 'external peripheral problems' }
- BTN_VIRUS ‚Üí { problem: 'infecciones de malware o virus', problemEn: 'malware or virus infections' }

getDeviceFromButton(buttonToken) - l√≠nea ~5645
-------------------------------------------------------------------------------
Mapea tokens de dispositivos a configuraci√≥n:
- BTN_DEV_PC_DESKTOP ‚Üí { device: 'pc', pcType: 'desktop', label: 'PC de escritorio' }
- BTN_DEV_PC_ALLINONE ‚Üí { device: 'pc', pcType: 'all_in_one', label: 'PC All in One' }
- BTN_DEV_NOTEBOOK ‚Üí { device: 'notebook', pcType: null, label: 'Notebook' }

sortProblemButtons(buttons) - l√≠nea ~4269
-------------------------------------------------------------------------------
Ordena botones de problemas por:
1. Tasa de √©xito hist√≥rica (PROBLEM_METRICS)
2. Orden original si no hay m√©tricas

================================================================================
GUARD RAILS Y VALIDACIONES
================================================================================

Simulaci√≥n (session.simulation === true):
- Bloquea: BTN_FEEDBACK_USEFUL, BTN_FEEDBACK_NOT_USEFUL
- Permite: Todos los dem√°s botones

Validaci√≥n de datos m√≠nimos (faltanDatosMinimos):
- Se verifica antes de mostrar pasos (FASE 1.1)
- Se verifica antes de regenerar pasos (BTN_BACK_TO_STEPS)
- Ubicaci√≥n: handleAskDeviceStage() l√≠nea ~6109, handleBasicTestsStage() l√≠nea ~7480

Prevenci√≥n de repeticiones (FASE 2.3):
- Aplicada a: BTN_SOLVED, BTN_PERSIST, BTN_CLOSE, BTN_FEEDBACK_*
- Funci√≥n: applyTecnosVoice() - l√≠nea ~923
- Verifica: session.progress.lastBotMessages

================================================================================
INTEGRACI√ìN CON FRONTEND
================================================================================

Normalizaci√≥n de botones (index.php):
- LABEL_MAP: Mapea tokens a labels visibles
- normalizeButtons(): Normaliza botones antes de mostrar
- sendButton(): Env√≠a token al backend

Marcadores din√°micos:
- [BTN_HELP_STEP_X]: Reemplazado por frontend con bot√≥n real
- Frontend busca marcadores y genera botones correspondientes

Botones de WhatsApp:
- BTN_WHATSAPP_TECNICO: Generado din√°micamente en frontend
- No se env√≠a como bot√≥n normal, abre WhatsApp directamente
- Ubicaci√≥n frontend: appendWAButton()

================================================================================
ESTAD√çSTICAS FINALES
================================================================================

Total botones en EMBEDDED_CHAT: 50
Botones activos con handler: ~35
Botones legacy/no implementados: ~15
Botones din√°micos: 
  - BTN_HELP_STEP_X: Ilimitados (uno por paso)
  - BTN_FEEDBACK_*: 2 (generados din√°micamente)
Botones especiales (no en EMBEDDED_CHAT): 4

Handlers principales:
- handleAskLanguageStage: 4 botones
- handleAskUserLevelStage: 3 botones
- handleAskNeedStage: 6 botones
- handleAskDeviceStage: 3 botones
- handleBasicTestsStage: 7+ botones (m√°s din√°micos)
- handleEscalateStage: 2 botones

Funciones de mapeo:
- getProblemFromButton: 6 problemas
- getDeviceFromButton: 3 dispositivos
- Mapeos de texto libre: 20+ variantes

================================================================================
FIN DEL INFORME
================================================================================

